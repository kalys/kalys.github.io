---
layout: post
title: my wmii configuration
date: '2008-10-27T17:51:00.003+06:00'
author: Kalys Osmonov
tags: 
modified_time: '2010-04-01T10:23:34.372+06:00'
blogger_id: tag:blogger.com,1999:blog-8050025493590874033.post-7691327275340050741
blogger_orig_url: http://www.osmonov.com/2008/10/my-wmii-configuration.html
---

<blockquote><pre name="code" class="bash">#!/bin/sh -f<br /># Configure wmii<br />wmiiscript=wmiirc # For wmii.sh<br />. wmii.sh<br /><br /># Configuration Variables<br />MODKEY=Mod4<br />UP=k<br />DOWN=j<br />LEFT=h<br />RIGHT=l<br />SOUNDUPB=s<br />SOUNDDOWNB=a<br /><br /># Bars<br />noticetimeout=5<br />noticebar=/rbar/!notice<br /><br /># Colors tuples: "<text> <background> <border>"<br />WMII_NORMCOLORS='#000000 #c1c48b #81654f'<br />#WMII_FOCUSCOLORS='#000000 #81654f #000000'<br />WMII_FOCUSCOLORS='#ffffff #191A1A #000000'<br /><br />WMII_BACKGROUND='#333333'<br />WMII_FONT='-*-fixed-medium-r-*-*-13-*-*-*-*-*-*-*'<br /><br />set -- $(echo $WMII_NORMCOLORS $WMII_FOCUSCOLORS)<br />WMII_MENU='dmenu -b -fn "$WMII_FONT" -nf '"'$1' -nb '$2' -sf '$4' -sb '$5'"<br />WMII_9MENU='wmii9menu -font "$WMII_FONT" -nf '"'$1' -nb '$2' -sf '$4' -sb '$5' -br '$6'"<br />WMII_TERM="urxvt"<br />WMII_SOUNDUP="amixer sset PCM 5%+"<br />WMII_SOUNDDOWN="amixer sset PCM 5%-"<br /><br /># Column Rules<br />wmiir write /colrules <> 17+83+41<br />/.*/ -> 62+38 # Golden Ratio<br />!<br /><br /># Tagging Rules<br />wmiir write /tagrules <> ~<br />!<br /><br /># Status Bar Info<br />status() {<br /> echo -n $(uptime | sed 's/.*://; s/,//g') '|' $(date)<br />}<br /><br />echo $WMII_NORMCOLORS | wmiir create $noticebar<br /><br /># Event processing<br />wi_events -s ' ' <<'!'  # Events  Event CreateTag   echo "$WMII_NORMCOLORS" "$@" | wmiir create "/lbar/$@"  Event DestroyTag   wmiir remove "/lbar/$@"  Event FocusTag   wmiir xwrite "/lbar/$@" "$WMII_FOCUSCOLORS" "$@"  Event UnfocusTag   wmiir xwrite "/lbar/$@" "$WMII_NORMCOLORS" "$@"  Event UrgentTag   shift   wmiir xwrite "/lbar/$@" "*$@"  Event NotUrgentTag   shift   wmiir xwrite "/lbar/$@" "$@"  Event LeftBarClick LeftBarDND   shift   wmiir xwrite /ctl view "$@"  Event ClientMouseDown   client=$1; button=$2   case "$button" in   3)    do=$(wi_9menu -initial "$menulast" Nop Delete Fullscreen)    case "$do" in    Delete)     wmiir xwrite /client/$client/ctl kill;;    Fullscreen)     wmiir xwrite /client/$client/ctl Fullscreen on;;    esac    menulast=${do:-"$menulast"}   esac  Event Unresponsive   {    client=$1; shift    msg="The following client is not responding. What would you like to do?$wi_nl"    resp=$(wihack -transient $client \           xmessage -nearmouse -buttons Kill,Wait -print \                    "$msg $(wmiir read /client/sel/label)")    if [ "$resp" = Kill ]; then     wmiir xwrite /client/$client/ctl slay &amp;    fi   }&amp;  Event Notice   wmiir xwrite $noticebar $wi_arg    kill $xpid 2>/dev/null # Let's hope this isn't reused...<br />  { sleep $noticetimeout; wmiir xwrite $noticebar ' '; }&amp;<br />  xpid = $!<br /> # Actions<br /> Action quit<br />  wmiir xwrite /ctl quit<br /> Action exec<br />  wmiir xwrite /ctl exec "$@"<br /> Action rehash<br />  proglist $PATH >$progsfile<br /> Action status<br />  set +xv<br />  if wmiir remove /rbar/status 2>/dev/null; then<br />   sleep 2<br />  fi<br />  echo "$WMII_NORMCOLORS" | wmiir create /rbar/status<br />  while status | wmiir write /rbar/status; do<br />   sleep 1<br />  done<br /> # Key Bindings<br /> Key $MODKEY-Control-t<br />  case $(wmiir read /keys | wc -l | tr -d ' \t\n') in<br />  0|1)<br />   echo -n "$Keys" | wmiir write /keys<br />   wmiir xwrite /ctl grabmod $MODKEY;;<br />  *)<br />   wmiir xwrite /keys $MODKEY-Control-t<br />   wmiir xwrite /ctl grabmod Mod3;;<br />  esac<br /> Key $MODKEY-space<br />  wmiir xwrite /tag/sel/ctl select toggle<br /> Key $MODKEY-d<br />  wmiir xwrite /tag/sel/ctl colmode sel default<br /> Key $MODKEY-s<br />  wmiir xwrite /tag/sel/ctl colmode sel stack<br /> Key $MODKEY-m<br />  wmiir xwrite /tag/sel/ctl colmode sel max<br /> Key $MODKEY-a<br />  Action $(wi_actions | wi_menu) &amp;<br /> Key $MODKEY-p<br />  eval wmiir setsid "$(wi_menu <$progsfile)" &amp;  Key $MODKEY-t   wmiir xwrite /ctl view $(wi_tags | wi_menu) &amp;  Key $MODKEY-Return   eval $WMII_TERM &amp;  Key $MODKEY-Shift-space   wmiir xwrite /tag/sel/ctl send sel toggle  Key $MODKEY-f   wmiir xwrite /client/sel/ctl Fullscreen toggle  Key $MODKEY-Shift-c   wmiir xwrite /client/sel/ctl kill  Key $MODKEY-Shift-t   wmiir xwrite "/client/$(wmiir read /client/sel/ctl)/tags" $(wi_tags | wi_menu) &amp;  Key $MODKEY-$LEFT   wmiir xwrite /tag/sel/ctl select left  Key $MODKEY-$RIGHT   wmiir xwrite /tag/sel/ctl select right  Key $MODKEY-$DOWN   wmiir xwrite /tag/sel/ctl select down  Key $MODKEY-$UP   wmiir xwrite /tag/sel/ctl select up  Key $MODKEY-Shift-$LEFT   wmiir xwrite /tag/sel/ctl send sel left  Key $MODKEY-Shift-$RIGHT   wmiir xwrite /tag/sel/ctl send sel right  Key $MODKEY-Shift-$DOWN   wmiir xwrite /tag/sel/ctl send sel down  Key $MODKEY-Shift-$UP   wmiir xwrite /tag/sel/ctl send sel up  Key $MODKEY-Shift-$SOUNDUPB   eval $WMII_SOUNDUP &amp;  Key $MODKEY-Shift-$SOUNDDOWNB   eval $WMII_SOUNDDOWN &amp; !  for i in 0 1 2 3 4 5 6 7 8 9; do   wi_events -s ' ' <>$progsfile &amp;<br /><br /># Setup Tag Bar<br />OIFS="$IFS"; IFS="$wi_nl"<br />wmiir rm $(wmiir ls /lbar | sed 's,^,/lbar/,')<br />seltag=$(wmiir read /tag/sel/ctl | sed 1q)<br />IFS="$OIFS"<br />wi_tags | while read tag<br />do<br /> if [ "$tag" = "$seltag" ]; then<br />  echo "$WMII_FOCUSCOLORS" "$tag"<br /> else<br />  echo "$WMII_NORMCOLORS" "$tag"<br /> fi | wmiir create "/lbar/$tag"<br />done<br /><br />wi_eventloop<br /></pre></blockquote>